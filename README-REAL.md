# 真实私有区块链实现

本项目实现了一个真实的区块链系统，可以在本地建立私有链并创建创世区块。与演示/模拟版本不同，此版本使用真实的密码学原语和区块链机制，无需依赖量子计算模拟库。

## 主要特点

- 完整的区块链实现，包含区块、交易和共识机制
- 真实的工作量证明挖矿算法
- 密钥对生成及数字签名机制
- 持久化存储区块链数据
- 支持网络节点服务
- 命令行交互界面
- 易于部署和使用

## 系统要求

- Python 3.7+
- 标准库依赖（无需额外安装）

## 快速开始

### 创建并运行私有链节点

1. 在终端中运行以下命令启动一个区块链节点：

```bash
python real_blockchain.py
```

2. 默认情况下，节点将在 `localhost:5000` 上运行
3. 节点启动后会自动创建创世区块
4. 使用命令行界面与节点交互：
   - `add_block <data>` - 添加新区块
   - `show_chain` - 显示整个区块链
   - `save` - 保存区块链到文件
   - `load` - 从文件加载区块链
   - `exit` - 退出节点

### 运行演示模式

如果您只想查看区块链创建和使用的演示，可以运行：

```bash
python real_blockchain.py --demo
```

演示模式将：
1. 创建一个新的区块链和创世区块
2. 生成一个密钥对
3. 添加一个交易区块
4. 将区块链保存到文件

### 配置选项

通过命令行参数可以自定义区块链节点：

```bash
python real_blockchain.py --host <主机地址> --port <端口号> --difficulty <挖矿难度>
```

- `--host` - 指定主机地址（默认：localhost）
- `--port` - 指定端口号（默认：5000）
- `--difficulty` - 设置挖矿难度（默认：4）

## 技术细节

### 区块结构

每个区块包含以下信息：
- 索引（区块在链中的位置）
- 时间戳（区块创建时间）
- 数据（区块包含的信息，如交易）
- 前一个区块的哈希（链接到前一个区块）
- 签名（区块的数字签名）
- 工作量证明随机数（nonce）
- 区块哈希（由上述所有信息计算得出）

### 工作量证明

系统使用类似比特币的工作量证明机制：
- 寻找一个随机数（nonce），使得区块的哈希值前面有指定数量的零
- 挖矿难度可通过命令行参数调整

### 密钥和签名

- 使用安全随机数生成密钥对
- 支持数据签名和验证
- 区块可以包含签名的交易

### 持久化存储

- 区块链可以保存到JSON文件
- 可以从文件中加载区块链
- 便于备份和恢复

## 多节点网络

要创建多个节点并形成私有网络：

1. 在不同的终端窗口中以不同的端口启动多个节点：
```bash
# 节点1
python real_blockchain.py --port 5000

# 节点2
python real_blockchain.py --port 5001

# 节点3
python real_blockchain.py --port 5002
```

2. 节点之间可以通过网络通信同步区块链数据（注：当前实现中需要手动注册对等节点）

## 区块链安全性

本实现采用以下安全措施：
- SHA-256哈希算法
- 工作量证明机制
- 数据签名与验证
- 链式哈希确保数据完整性

## 扩展与定制

您可以根据需要扩展此实现：
- 添加更复杂的交易类型
- 实现智能合约功能
- 增强网络通信能力
- 添加图形用户界面
- 集成更复杂的密码学算法

## 注意事项

- 此实现主要用于教育和演示目的
- 虽然使用了真实的加密技术，但仍建议不要用于存储敏感数据
- 生产环境中应考虑进一步增强安全性和可扩展性

## 常见问题解答

**Q: 如何更改创世区块的内容？**
A: 修改`Blockchain`类中的`_create_genesis_block`方法中的`data`字典内容。

**Q: 如何调整挖矿难度？**
A: 使用`--difficulty`参数启动节点，或修改`Blockchain`类初始化时的`difficulty`参数。

**Q: 如何备份我的区块链？**
A: 使用节点命令行中的`save`命令将区块链保存到文件，默认保存为`blockchain.json`。

**Q: 如何恢复备份的区块链？**
A: 使用节点命令行中的`load`命令从文件加载区块链。 